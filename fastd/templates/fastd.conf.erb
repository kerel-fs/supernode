log to syslog level <%= syslog_level %>;

# Set the interface name
interface "<%= interface %>";

# Support xsalsa20 and aes128 encryption methods, prefer xsalsa20
<% @ciphers.each do |cipher| -%>
method "<%= cipher %>";
<% end -%>

secure handshakes <%= secure_handshakes %>;

# Bind to a fixed port, IPv4 only
bind <%= bind_addr %>;

# Secret key generated by 'fastd --generate-key'
secret "<%= secret_key %>";

# Set the interface MTU for TAP mode with xsalsa20/aes128 over IPv4 with a base MTU of 1492 (PPPoE)
# (see MTU selection documentation)
mtu <%= mtu %>;
pmtu <%= pmtu %>;

# Include peers from the directory 'peers'
<% @peers_dirs.each do |dir| -%>
include peers from "<%= dir %>";
<% end -%>

on up "./fastd-up";
on down "./fastd-down";

on establish "./on-establish";
on disestablish "./on-disestablish";

on connect "./on-connect";
